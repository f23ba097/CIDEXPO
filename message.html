<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DM体験</title>

    <link rel="stylesheet" type="text/css"
        href="https://coco-factory.jp/ugokuweb/wp-content/themes/ugokuweb/data/5-4-1/css/5-4-1.css">
    <link rel="stylesheet" href="./css/style1.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://unpkg.com/ityped@1.0.3"></script>
    <script src="./js/main.js"></script>
</head>

<body>
    <div class="pop_up blur">
        <div class="control">
            <h3>
                <span id="ityped"></span>
            </h3>
            <div class="choice">
                <button></button>
                <button></button>
            </div>
        </div>
    </div>

    <header>
        <h1 id="headstr">メッセージ</h1>
    </header>
    <main>
        <div id="Contact_form">
            <div id="bulletin_board">
            </div>
        </div>

    </main>

    <footer id="page_footer">

    </footer>

    <script>
        // メッセージのやり取りを進行する関数
        async function exchange() {
            // スタートボタン削除
            document.getElementById("next_btn").remove()
            // ポップアップ非表示
            document.getElementsByClassName("pop_up")[0].className = "pop_up";
            document.getElementsByClassName("pop_up")[0].style.display = "none";
            // message_arrayの監視開始
            add_message();
            message_array.push(["こんにちは！ご当選おめでとうございます!!あなたは100万円の賞金を入手する権利を得ました。", "enemy"]);
            message_array.push(["こんにちは、どうやったら貰えるんですか？", "me"]);
            message_array.push(["それは非常に簡单なプロセスです。まずURLをクリックしてください", "enemy"]);
            message_array.push(["http://aikkgkyco.xyz/login", "enemy"]);
            message_array.push(["show_pop_up", '{ "genre": "質問", "message": "あなたなら送られてきたリンクをクリックしますか？", "button1_txt": "クリックする", "button2_txt": "無視する", "correct_answer": "2", "btn1_content":"突然送られてきたリンクをクリックするのは危険です!常に疑ってみることも大切です。", "btn2_content":"素晴らしいですね!突然送られてきたリンクはクリックしないことが大切です。"}'])
        }
        
        // ゲームのシナリオを進行するメインの関数
        async function scenario_start() {
            // 最初のゲームスタートポップアップ
            ityped.init(document.querySelector("#ityped"), { strings: ['ようこそ!', 'これは詐欺の体験型ゲームです'], loop: false });
            await wait(4500);
            // テキストを消し、ボタンを出現させる
            let txt_elm = document.getElementById("ityped");
            let txt_count = document.getElementById("ityped").textContent.length;
            for (let i = 0; i < txt_count; i++) {  // 文字をゆっくり削除するためのfor文
                txt_elm.textContent = txt_elm.textContent.slice(0, txt_elm.textContent.length - 1);
                await wait(80);
            }
            // スタートボタン出現
            document.getElementsByClassName("control")[0].getElementsByTagName("h3")[0].innerHTML = '<span id="ityped"><button id="next_btn" onclick="exchange();" class="blur">スタート</button></span>';  // ここでテキスト削除完了
        }


        scenario_start();


    </script>
</body>

</html>